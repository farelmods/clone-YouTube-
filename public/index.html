<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playtube</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #9d4edd;
            --primary-hover: #c77dff;
            --bg-color: #0f0f0f;
            --sidebar-bg: #0f0f0f;
            --header-bg: #0f0f0f;
            --text-color: #ffffff;
            --text-secondary: #aaaaaa;
            --border-color: #222222;
            --hover-bg: #272727;
            --active-bg: #3f3f3f;
            --card-bg: #0f0f0f;
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            width: 100%;
        }

        /* Header */
        header {
            background-color: var(--header-bg);
            padding: 0 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 56px;
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .menu-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
        }

        .menu-btn:hover {
            background-color: var(--hover-bg);
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
            gap: 4px;
        }

        .logo span {
            color: var(--text-color);
            letter-spacing: -1px;
        }

        .header-center {
            display: flex;
            align-items: center;
            flex-grow: 1;
            justify-content: center;
            max-width: 720px;
            gap: 8px;
        }

        .search-wrapper {
            display: flex;
            width: 100%;
            max-width: 600px;
        }

        .search-wrapper input {
            flex-grow: 1;
            padding: 0 16px;
            height: 40px;
            background-color: #121212;
            color: white;
            border: 1px solid var(--border-color);
            border-radius: 40px 0 0 40px;
            font-size: 16px;
            outline: none;
        }

        .search-wrapper input:focus {
            border-color: var(--primary-color);
        }

        .search-btn {
            width: 64px;
            height: 40px;
            background-color: #222222;
            color: white;
            border: 1px solid var(--border-color);
            border-left: none;
            border-radius: 0 40px 40px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-btn:hover {
            background-color: #f0f0f0;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .mic-btn {
            background-color: #f8f8f8;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mic-btn:hover {
            background-color: #333333;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .login-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: 1px solid var(--border-color);
            padding: 6px 12px;
            cursor: pointer;
            border-radius: 20px;
            color: var(--primary-color);
            font-weight: 500;
        }

        .login-btn:hover {
            background-color: var(--hover-bg);
            border-color: var(--primary-color);
        }

        .icon-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mobile-only {
            display: none;
        }

        .desktop-only {
            display: flex;
        }

        .signin-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0 12px;
            height: 36px;
            border: 1px solid var(--border-color);
            border-radius: 18px;
            color: var(--primary-color);
            background: none;
            font-weight: 500;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 14px;
        }

        .signin-btn:hover {
            background-color: #f2f8ff;
            border-color: transparent;
        }

        /* Sidebar */
        aside {
            position: fixed;
            top: 56px;
            left: 0;
            bottom: 0;
            width: 240px;
            background-color: var(--sidebar-bg);
            padding: 12px 0;
            overflow-y: auto;
            z-index: 900;
        }

        .sidebar-section {
            border-bottom: 1px solid var(--border-color);
            padding: 8px 0;
        }

        .sidebar-section:last-child {
            border-bottom: none;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 0 24px;
            height: 40px;
            text-decoration: none;
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
        }

        .sidebar-item:hover {
            background-color: var(--hover-bg);
        }

        .sidebar-item.active {
            background-color: var(--active-bg);
            font-weight: 500;
        }

        .sidebar-item.active svg {
            color: var(--primary-color);
            fill: var(--primary-color);
        }

        .sidebar-title {
            padding: 8px 24px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* Main Content */
        main {
            margin-top: 56px;
            margin-left: 240px;
            padding: 24px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            row-gap: 40px;
            animation: fadeIn 0.4s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Video Card */
        .card {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .thumbnail-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 12px;
            overflow: hidden;
            background-color: #000;
            margin-bottom: 12px;
        }

        .thumbnail-container img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Changed to contain to avoid cropping important parts, with black background */
            object-position: center;
        }

        /* Fluid suggested thumbnails for mobile */
        .suggested-card .thumbnail-container {
            width: 40%;
            min-width: 120px;
            margin-bottom: 0;
            border-radius: 8px;
        }

        /* Shorts Section */
        .shorts-container {
            grid-column: 1 / -1;
            padding: 16px 0;
            border-top: 4px solid var(--border-color);
            border-bottom: 4px solid var(--border-color);
            margin: 16px 0;
        }

        .shorts-header {
            display: flex;
            align-items: center;
            padding: 0 16px 12px;
            gap: 8px;
            font-weight: bold;
            font-size: 18px;
        }

        .shorts-grid {
            display: flex;
            overflow-x: auto;
            gap: 8px;
            padding: 0 16px;
            scrollbar-width: none;
        }

        .shorts-grid::-webkit-scrollbar {
            display: none;
        }

        .short-card {
            min-width: 150px;
            width: 150px;
            cursor: pointer;
        }

        .short-thumbnail {
            width: 100%;
            aspect-ratio: 9 / 16;
            border-radius: 12px;
            overflow: hidden;
            background-color: #222222;
            position: relative;
        }

        .short-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .short-title {
            margin-top: 8px;
            font-size: 14px;
            font-weight: 500;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .short-views {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .video-details {
            display: flex;
            gap: 12px;
        }

        .channel-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* Anda (Profile) View Styles */
        .anda-header {
            display: flex;
            padding: 16px;
            align-items: center;
            gap: 16px;
        }

        .anda-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #ff5722;
            color: white;
            font-size: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .anda-info h2 {
            margin: 0;
            font-size: 24px;
        }

        .anda-info p {
            margin: 4px 0;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .anda-section {
            padding: 16px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .anda-section-header {
            display: flex;
            justify-content: space-between;
            padding: 0 16px 12px;
            font-weight: bold;
            font-size: 18px;
        }

        .anda-history-list {
            display: flex;
            overflow-x: auto;
            padding: 0 16px;
            gap: 12px;
            scrollbar-width: none;
        }

        .anda-history-list::-webkit-scrollbar {
            display: none;
        }

        .anda-history-item {
            min-width: 160px;
            width: 160px;
        }

        .anda-history-thumb {
            width: 100%;
            aspect-ratio: 16/9;
            border-radius: 8px;
            overflow: hidden;
            background-color: #333;
        }

        .anda-history-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .anda-history-title {
            font-size: 12px;
            margin-top: 4px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .anda-menu-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            gap: 16px;
        }

        .user-avatar-small {
            width: 24px;
            height: 24px;
            background-color: #ff5722;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
        }

        .video-info {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .video-title {
            font-size: 16px;
            font-weight: 500;
            margin: 0 0 4px 0;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
        }

        .channel-name {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .video-meta {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .loading {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            color: var(--primary-color);
            font-weight: 500;
        }

        /* Notification Overlay */
        #notification-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            z-index: 2500;
            flex-direction: column;
            animation: slideInUp 0.3s ease-out;
        }

        .notif-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
            gap: 16px;
        }

        .notif-list {
            flex-grow: 1;
            overflow-y: auto;
        }

        .notif-item {
            display: flex;
            padding: 12px 16px;
            gap: 12px;
            align-items: flex-start;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .notif-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--primary-color);
            flex-shrink: 0;
        }

        .notif-content {
            flex-grow: 1;
        }

        .notif-text {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 4px;
        }

        .notif-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .notif-thumb {
            width: 60px;
            aspect-ratio: 16/9;
            border-radius: 4px;
            overflow: hidden;
            background-color: #333;
        }

        .notif-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes slideInUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        /* Bottom Sheet */
        #create-sheet {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--sidebar-bg);
            z-index: 4000;
            border-radius: 12px 12px 0 0;
            flex-direction: column;
            padding-bottom: 24px;
            animation: slideInUp 0.3s ease-out;
        }

        .sheet-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 3999;
        }

        .sheet-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            font-weight: bold;
            font-size: 18px;
        }

        .sheet-item {
            display: flex;
            align-items: center;
            padding: 16px;
            gap: 16px;
            cursor: pointer;
        }

        .sheet-item:active {
            background-color: var(--hover-bg);
        }

        .sheet-icon {
            width: 40px;
            height: 40px;
            background-color: var(--hover-bg);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Modal Base */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f0f0f;
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        /* Modal for playback - Mobile Optimized */
        #video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            z-index: 5000;
            flex-direction: column;
            overflow-y: auto;
        }

        .video-player-container {
            width: 100%;
            aspect-ratio: 16/9;
            background: black;
            position: sticky;
            top: 0;
            z-index: 5001;
        }

        .video-details-page {
            padding: 12px;
        }

        .video-details-page h2 {
            font-size: 18px;
            margin: 0 0 8px 0;
            line-height: 1.4;
        }

        .video-details-page .meta {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .channel-info-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .subs-count {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .subscribe-btn {
            margin-left: auto;
            background-color: white;
            color: black;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .actions-bar {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 12px;
            scrollbar-width: none;
        }

        .actions-bar::-webkit-scrollbar {
            display: none;
        }

        .action-item {
            display: flex;
            align-items: center;
            background-color: var(--hover-bg);
            padding: 8px 16px;
            border-radius: 20px;
            gap: 6px;
            white-space: nowrap;
            font-size: 12px;
            font-weight: 500;
            transition: background 0.2s;
        }

        .action-item:active {
            background-color: var(--active-bg);
        }

        .suggested-section {
            padding-top: 12px;
        }

        /* Collapsible Description */
        .description-box {
            background-color: var(--hover-bg);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 16px;
            cursor: pointer;
        }

        .description-text {
            font-size: 14px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .description-box.expanded .description-text {
            display: block;
            -webkit-line-clamp: unset;
        }

        .close-player-btn {
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 5002;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .login-card {
            background-color: #0f0f0f;
            border: 1px solid var(--border-color);
            padding: 40px;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            position: relative;
        }

        .login-card h2 {
            margin-bottom: 8px;
            color: white;
        }

        .login-card p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 14px;
        }

        .login-card input {
            width: 100%;
            padding: 12px;
            margin-bottom: 16px;
            background-color: #1a1a1a;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: white;
            outline: none;
        }

        .login-card input:focus {
            border-color: var(--primary-color);
        }

        .login-card .submit-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
        }

        .login-card .submit-btn:hover {
            background-color: var(--primary-hover);
        }

        .login-card .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        @media (max-width: 1000px) {
            aside {
                width: 72px;
            }
            .sidebar-item {
                padding: 0;
                flex-direction: column;
                height: 72px;
                justify-content: center;
                gap: 4px;
                font-size: 10px;
            }
            .sidebar-title, .sidebar-section:not(:first-child) {
                display: none;
            }
            main {
                margin-left: 72px;
            }
        }

        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 56px;
            background-color: var(--header-bg);
            border-top: 1px solid var(--border-color);
            z-index: 1000;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex: 1;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 10px;
            cursor: pointer;
            gap: 4px;
            height: 100%;
        }

        .nav-item:active {
            background-color: var(--hover-bg);
        }

        .nav-item svg {
            fill: currentColor;
        }

        .nav-item.active {
            color: white;
        }

        .nav-item.active svg {
            fill: var(--primary-color);
        }

        @media (max-width: 600px) {
            .mobile-only {
                display: flex;
            }
            .desktop-only {
                display: none;
            }
            header .header-center {
                display: none;
            }
            .header-left .menu-btn {
                display: none;
            }
            aside {
                display: none;
            }
            main {
                margin-left: 0;
                padding: 0;
                margin-bottom: 56px;
            }
            .bottom-nav {
                display: flex;
            }
            .grid {
                grid-template-columns: 1fr;
                gap: 0;
            }
            .card {
                margin-bottom: 16px;
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 16px;
            }
            .thumbnail-container {
                border-radius: 0;
                margin-bottom: 8px;
            }
            .video-details {
                padding: 0 12px;
            }
            .header-right {
                display: flex;
                gap: 12px;
            }
            .mobile-search-active header .header-center {
                display: flex;
                position: absolute;
                left: 0;
                right: 0;
                background: var(--header-bg);
                padding: 0 16px;
                max-width: 100%;
                z-index: 1001;
            }
            .mobile-search-active .header-left,
            .mobile-search-active .header-right {
                display: none;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="header-left">
        <button class="menu-btn">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M21 6H3V5h18v1zm0 5H3v1h18v-1zm0 6H3v1h18v-1z"></path></svg>
        </button>
        <a href="/" class="logo">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="var(--primary-color)"><path d="M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77.42-1.56.42-4.81.42-4.81s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"/></svg>
            <span>Playtube</span>
        </a>
    </div>
    <div class="header-center">
        <button class="icon-btn mobile-only" id="mobile-search-back">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg>
        </button>
        <div class="search-wrapper">
            <input type="text" id="search-input" placeholder="Telusuri">
            <button class="search-btn" id="search-btn">
                <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M20.87 20.17l-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"></path></svg>
            </button>
        </div>
        <button class="mic-btn">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 3c-1.66 0-3 1.34-3 3v7c0 1.66 1.34 3 3 3s3-1.34 3-3V6c0-1.66-1.34-3-3-3zM11 6c0-.55.45-1 1-1s1 .45 1 1v7c0 .55-.45 1-1 1s-1-.45-1-1V6zM18.91 13c-.49 0-.91.36-.98.84C17.42 17.07 14.91 19 12 19s-5.42-1.93-5.93-5.16c-.07-.48-.49-.84-.98-.84-.58 0-1.02.52-.95 1.1.63 4.39 4.01 7.82 8.36 8.75V25c0 .55.45 1 1 1s1-.45 1-1v-2.15c4.35-.93 7.73-4.36 8.36-8.75.07-.58-.37-1.1-.95-1.1z"></path></svg>
        </button>
    </div>
    <div class="header-right">
        <button class="icon-btn mobile-only" id="cast-btn">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.92-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>
        </button>
        <button class="icon-btn mobile-only" id="notif-btn">
            <div style="position: relative;">
                <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path></svg>
                <div style="position: absolute; top: -2px; right: -5px; background: red; color: white; font-size: 10px; border-radius: 8px; padding: 0 4px;">9+</div>
            </div>
        </button>
        <button class="icon-btn mobile-only" id="mobile-search-btn">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M20.87 20.17l-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"></path></svg>
        </button>
        <button class="login-btn desktop-only" id="header-login-btn">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
            <span>Login</span>
        </button>
    </div>
</header>

<nav class="bottom-nav">
    <div class="nav-item active" onclick="loadTrending()">
        <svg height="24" viewBox="0 0 24 24" width="24"><path d="M4 10V21h6V15h4v6h6V10L12 3Z"></path></svg>
        <span>Beranda</span>
    </div>
    <div class="nav-item" onclick="loadSearch('shorts')">
        <svg height="24" viewBox="0 0 24 24" width="24"><path d="M17.77 10.32l-1.2-.5L18 8.82a3.74 3.74 0 00-2.39-6.75 3.7 3.7 0 00-1.51.32l-10 4.1a3.75 3.75 0 00-.07 7l1.2.5L4 15.18a3.75 3.75 0 002.46 6.76 3.7 3.7 0 001.46-.3l10-4.1a3.75 3.75 0 00.07-7l-.22-.12zM10 14.5v-5l5 2.5-5 2.5z"></path></svg>
        <span>Shorts</span>
    </div>
    <div class="nav-item" id="create-btn-mobile">
        <svg height="36" viewBox="0 0 24 24" width="36" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>
    </div>
    <div class="nav-item" onclick="loadSearch('subscriptions')">
        <svg height="24" viewBox="0 0 24 24" width="24"><path d="M10 18v-6l5 3-5 3zm7-15H7v1h10V3zm3 3H4v1h16V6zm2 3H2v12h20V9zM3 10h18v10H3V10z"></path></svg>
        <span>Subscription</span>
    </div>
    <div class="nav-item" id="mobile-anda-btn" onclick="loadAnda()">
        <div class="user-avatar-small">P</div>
        <span>Anda</span>
    </div>
</nav>

<aside>
    <div class="sidebar-section">
        <a class="sidebar-item active" onclick="loadTrending()">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M4 10V21h6V15h4v6h6V10L12 3Z"></path></svg>
            <span>Beranda</span>
        </a>
        <a class="sidebar-item" onclick="loadTrending()">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M10 14.65v-5.3L15 12l-5 2.65ZM13 13V7l5.2 3-5.2 3ZM22 13h-4v9h-2v-9h-2V7h8v6ZM2 13h1V7H2v6Zm3 0h1V7H5v6Zm3 0h1V7H8v6Z"></path></svg>
            <span>Trending</span>
        </a>
        <a class="sidebar-item">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M20 7H4v10h16V7zm2-2v14H2V5h20zM7 14l5-3 5 3v-1l-5-3-5 3v1z"></path></svg>
            <span>Subscriptions</span>
        </a>
    </div>
    <div class="sidebar-section">
        <a class="sidebar-item" onclick="loadHistory()">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M11 7l6 3.5-6 3.5V7zm7 13H4V6H3v15h15v-1zm3-2H6V3h15v15zM7 17h13V4H7v13z"></path></svg>
            <span>Koleksi</span>
        </a>
        <a class="sidebar-item" onclick="loadHistory()">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6a7 7 0 1 1 7 7 7.07 7.07 0 0 1-6-3.22l-1.44 1.44A9 9 0 1 0 13 3z"></path></svg>
            <span>Riwayat</span>
        </a>
    </div>
    <div class="sidebar-title">Best of Playtube</div>
    <div class="sidebar-section">
        <a class="sidebar-item" onclick="loadCategory(10)">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg>
            <span>Musik</span>
        </a>
        <a class="sidebar-item" onclick="loadCategory(20)">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 10 19.5 10s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></svg>
            <span>Game</span>
        </a>
        <a class="sidebar-item" onclick="loadCategory(25)">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H5V5h14v14zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm-4 4h10v2H7v-2z"></path></svg>
            <span>Berita</span>
        </a>
        <a class="sidebar-item" onclick="loadSearch('live')">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14.5v-9l6 4.5-6 4.5z"></path></svg>
            <span>Live</span>
        </a>
        <a class="sidebar-item" onclick="loadSearch('360 video')">
            <svg height="24" viewBox="0 0 24 24" width="24"><path d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 18c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm-1-13h2v4h4v2h-4v4h-2v-4H7v-2h4V7z"></path></svg>
            <span>360° Video</span>
        </a>
    </div>
</aside>

<main>
    <div class="grid" id="results">
        <div class="loading">Memuat video...</div>
    </div>
</main>

<div id="video-modal">
    <div class="video-player-container">
        <button class="icon-btn close-player-btn" id="close-player">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
        </button>
        <div id="player"></div>
    </div>
    <div class="video-details-page" id="video-details-content">
        <!-- Details will be injected here -->
    </div>
    <div class="suggested-section" id="suggested-results">
        <!-- Suggested videos -->
    </div>
</div>

<div id="notification-overlay">
    <div class="notif-header">
        <button class="icon-btn" id="close-notif">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg>
        </button>
        <span style="font-size: 18px; font-weight: bold;">Notifikasi</span>
        <button class="icon-btn" style="margin-left: auto;">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>
        </button>
    </div>
    <div class="notif-list" id="notif-list">
        <!-- Notif items here -->
    </div>
</div>

<div id="sheet-overlay" class="sheet-overlay"></div>
<div id="create-sheet">
    <div class="sheet-header">
        <span>Buat</span>
        <button class="icon-btn" id="close-sheet">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
        </button>
    </div>
    <div class="sheet-item">
        <div class="sheet-icon">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M10 14.65v-5.3L15 12l-5 2.65ZM13 13V7l5.2 3-5.2 3ZM22 13h-4v9h-2v-9h-2V7h8v6ZM2 13h1V7H2v6Zm3 0h1V7H5v6Zm3 0h1V7H8v6Z"></path></svg>
        </div>
        <span>Buat Short</span>
    </div>
    <div class="sheet-item">
        <div class="sheet-icon">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z"></path></svg>
        </div>
        <span>Upload video</span>
    </div>
    <div class="sheet-item">
        <div class="sheet-icon">
            <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14.5v-9l6 4.5-6 4.5z"></path></svg>
        </div>
        <span>Live</span>
    </div>
</div>

<div id="login-modal" class="modal">
    <div class="login-card">
        <button class="close-btn" id="close-login">&times;</button>
        <h2>Login ke Playtube</h2>
        <p>Gunakan akun Playtube Anda</p>
        <form id="login-form">
            <input type="text" placeholder="Email atau nomor telepon" required>
            <input type="password" placeholder="Sandi" required>
            <div style="text-align: left; margin-bottom: 24px;">
                <a href="#" style="color: var(--primary-color); font-size: 14px; text-decoration: none;">Lupa sandi?</a>
            </div>
            <button type="submit" class="submit-btn">Berikutnya</button>
        </form>
        <p style="margin-top: 24px; font-size: 14px;">
            Bukan perangkat Anda? Gunakan jendela Tamu untuk login secara pribadi.
        </p>
    </div>
</div>

<script>
    const resultsGrid = document.getElementById('results');
    const searchInput = document.getElementById('search-input');
    const searchBtn = document.getElementById('search-btn');
    const videoModal = document.getElementById('video-modal');
    const closePlayer = document.getElementById('close-player');
    const playerContainer = document.getElementById('player');

    async function fetchVideos(url) {
        resultsGrid.innerHTML = '';
        resultsGrid.style.animation = 'none';
        resultsGrid.offsetHeight; // trigger reflow
        resultsGrid.style.animation = null;
        resultsGrid.innerHTML = '<div class="loading">Memuat video...</div>';
        try {
            const res = await fetch(url);
            const data = await res.json();
            if (data.items && data.items.length > 0) {
                renderVideos(data.items);
            } else {
                renderMockVideos();
            }
        } catch (error) {
            console.error(error);
            renderMockVideos();
        }
    }

    function renderMockVideos() {
        const mockItems = [];
        for (let i = 1; i <= 8; i++) {
            mockItems.push({
                id: 'mock' + i,
                snippet: {
                    title: 'Contoh Video Playtube ' + i + ' - Belajar Desain UI/UX',
                    channelTitle: 'Playtube Channel',
                    thumbnails: { high: { url: `https://picsum.photos/seed/pt${i}/480/270` } }
                }
            });
        }
        renderVideos(mockItems);
    }

    // History logic
    let watchHistory = JSON.parse(localStorage.getItem('playtube_history') || '[]');

    function addToHistory(video) {
        watchHistory = JSON.parse(localStorage.getItem('playtube_history') || '[]').filter(item => {
            const id1 = typeof item.id === 'string' ? item.id : item.id.videoId;
            const id2 = typeof video.id === 'string' ? video.id : video.id.videoId;
            return id1 !== id2;
        });
        watchHistory.unshift(video);
        if (watchHistory.length > 50) watchHistory.pop();
        localStorage.setItem('playtube_history', JSON.stringify(watchHistory));
    }

    function loadHistory() {
        setActiveSidebar('Riwayat');
        renderVideos(watchHistory);
        if (watchHistory.length === 0) {
            resultsGrid.innerHTML = '<div class="loading" style="grid-column: 1/-1; text-align: center; margin-top: 50px;">Belum ada riwayat tontonan.</div>';
        }
    }

    function renderVideos(items) {
        resultsGrid.innerHTML = '';
        if (!items || items.length === 0) {
            resultsGrid.innerHTML = '<div class="loading">Tidak ada hasil.</div>';
            return;
        }

        items.forEach((video, index) => {
            const videoId = typeof video.id === 'string' ? video.id : video.id.videoId;
            const snippet = video.snippet;
            if (!videoId) return;

            // Add Shorts section after 4th video
            if (index === 4) {
                renderShortsSection(resultsGrid);
            }

            const card = document.createElement('div');
            card.className = 'card';
            card.onclick = () => {
                addToHistory(video);
                openVideo(videoId);
            };

            const initials = snippet.channelTitle.charAt(0).toUpperCase();

            card.innerHTML = `
                <div class="thumbnail-container">
                    <img src="${snippet.thumbnails.high.url}" alt="">
                </div>
                <div class="video-details">
                    <div class="channel-avatar">${initials}</div>
                    <div class="video-info">
                        <h3 class="video-title"></h3>
                        <p class="channel-name"></p>
                        <p class="video-meta"></p>
                    </div>
                    <div style="margin-left: auto; padding-top: 4px;">
                        <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>
                    </div>
                </div>
            `;

            // Set text content safely
            const titleEl = card.querySelector('.video-title');
            titleEl.textContent = snippet.title;
            titleEl.title = snippet.title;

            card.querySelector('.channel-name').textContent = snippet.channelTitle;
            card.querySelector('.video-meta').textContent = `${getRandomViews()} • ${getRandomTime()}`;
            resultsGrid.appendChild(card);
        });
    }

    function renderShortsSection(container) {
        const section = document.createElement('div');
        section.className = 'shorts-container';

        section.innerHTML = `
            <div class="shorts-header">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="#ff0000"><path d="M17.77 10.32l-1.2-.5L18 8.82a3.74 3.74 0 00-2.39-6.75 3.7 3.7 0 00-1.51.32l-10 4.1a3.75 3.75 0 00-.07 7l1.2.5L4 15.18a3.75 3.75 0 002.46 6.76 3.7 3.7 0 001.46-.3l10-4.1a3.75 3.75 0 00.07-7l-.22-.12zM10 14.5v-5l5 2.5-5 2.5z"></path></svg>
                <span>Shorts</span>
            </div>
            <div class="shorts-grid">
                ${[1,2,3,4,5].map(i => `
                    <div class="short-card">
                        <div class="short-thumbnail">
                            <img src="https://picsum.photos/seed/short${i}/200/350" alt="">
                        </div>
                        <div class="short-title">Video Shorts Menarik ${i} #shorts</div>
                        <div class="short-views">${Math.floor(Math.random()*100)+1} jt x ditonton</div>
                    </div>
                `).join('')}
            </div>
        `;
        container.appendChild(section);
    }

    function getRandomViews() {
        const views = Math.floor(Math.random() * 1000) + 1;
        return views + " rb x ditonton";
    }

    function getRandomTime() {
        const times = ["1 jam yang lalu", "5 jam yang lalu", "1 hari yang lalu", "3 hari yang lalu", "1 minggu yang lalu", "1 bulan yang lalu"];
        return times[Math.floor(Math.random() * times.length)];
    }

    async function openVideo(videoId) {
        // Fetch specific video details if possible, or use current context
        playerContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
        videoModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';

        // Inject video info
        const content = document.getElementById('video-details-content');
        content.innerHTML = `
            <h2 style="font-size: 16px;">Video Playtube Menarik - Judul Video Berkualitas untuk Tampilan Mobile</h2>
            <div class="meta">1.2 jt x ditonton • 2 jam yang lalu ...lebih banyak</div>

            <div class="channel-info-bar">
                <div class="channel-avatar">P</div>
                <div>
                    <div style="font-weight: bold; font-size: 14px;">Playtube Channel</div>
                    <div class="subs-count">1.5 jt subscriber</div>
                </div>
                <button class="subscribe-btn">Subscribe</button>
            </div>

            <div class="actions-bar">
                <div class="action-item">
                    <svg height="20" viewBox="0 0 24 24" width="20" fill="white"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"></path></svg>
                    <span>12 rb</span>
                </div>
                <div class="action-item">
                    <svg height="20" viewBox="0 0 24 24" width="20" fill="white"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.37-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></svg>
                </div>
                <div class="action-item">
                    <svg height="20" viewBox="0 0 24 24" width="20" fill="white"><path d="M11.73 15.83L11 14l1.73-1.83L15 13l-3.27 2.83zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 14.5v-9l6 4.5-6 4.5z"></path></svg>
                    <span>Bagikan</span>
                </div>
                <div class="action-item">
                    <svg height="20" viewBox="0 0 24 24" width="20" fill="white"><path d="M17 18V5H7v13h10zm1-14c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1h12zM8 7h3v2H8V7zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"></path></svg>
                    <span>Download</span>
                </div>
                <div class="action-item">
                    <svg height="20" viewBox="0 0 24 24" width="20" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>
                    <span>Simpan</span>
                </div>
            </div>

            <div class="description-box" id="description-trigger">
                <div class="description-text">
                    Deskripsi video yang sangat menarik dan mendetail akan muncul di bagian ini. User dapat membacanya lebih lengkap dengan mengetuk area ini. Kami memastikan bahwa semua konten pas di layar HP dan tidak terpotong. Selamat menikmati konten berkualitas dari Playtube!
                </div>
            </div>
        `;

        document.getElementById('description-trigger').onclick = function() {
            this.classList.toggle('expanded');
        };

        // Inject suggested videos
        const suggested = document.getElementById('suggested-results');
        suggested.innerHTML = '<div class="loading">Memuat saran...</div>';

        // Use trending as suggested for now
        try {
            const res = await fetch('/api/trending');
            const data = await res.json();
            renderSuggestedVideos(data.items || []);
        } catch(e) {
            renderSuggestedVideos([]);
        }
    }

    function renderSuggestedVideos(items) {
        const suggested = document.getElementById('suggested-results');
        suggested.innerHTML = '';
        const list = items.length > 0 ? items : Array(5).fill(0).map((_,i)=>({
            id: 'suggest'+i,
            snippet: { title: 'Video Terkait ' + (i+1), channelTitle: 'Recommended Channel', thumbnails: { high: { url: `https://picsum.photos/seed/sug${i}/480/270` }}}
        }));

        list.forEach(v => {
            const videoId = typeof v.id === 'string' ? v.id : v.id.videoId;
            const card = document.createElement('div');
            card.className = 'card suggested-card';
            card.style.flexDirection = 'row';
            card.style.padding = '8px 12px';
            card.style.gap = '12px';
            card.onclick = () => openVideo(videoId);
            card.innerHTML = `
                <div class="thumbnail-container">
                    <img src="${v.snippet.thumbnails.high.url}" alt="">
                </div>
                <div class="video-info">
                    <h3 class="video-title" style="font-size: 14px;"></h3>
                    <p class="channel-name" style="font-size: 12px;"></p>
                    <p class="video-meta" style="font-size: 12px;"></p>
                </div>
            `;
            card.querySelector('.video-title').textContent = v.snippet.title;
            card.querySelector('.channel-name').textContent = v.snippet.channelTitle;
            card.querySelector('.video-meta').textContent = getRandomViews() + ' • ' + getRandomTime();
            suggested.appendChild(card);
        });
    }

    closePlayer.onclick = () => {
        videoModal.style.display = 'none';
        playerContainer.innerHTML = '';
        document.body.style.overflow = 'auto';
    };

    window.onclick = (event) => {
        if (event.target == videoModal) {
            videoModal.style.display = 'none';
            playerContainer.innerHTML = '';
            document.body.style.overflow = 'auto';
        }
        if (event.target == loginModal) {
            loginModal.style.display = 'none';
        }
    };

    function loadTrending() {
        setActiveSidebar('Beranda');
        fetchVideos('/api/trending');
    }

    function loadCategory(id) {
        setActiveSidebar(null, id);
        fetchVideos(`/api/category?id=${id}`);
    }

    function loadSearch(q) {
        setActiveSidebar(null, null, q);
        fetchVideos(`/api/search?q=${encodeURIComponent(q)}`);
    }

    function loadAnda() {
        setActiveSidebar('Anda');
        resultsGrid.innerHTML = `
            <div class="anda-header">
                <div class="anda-avatar">P</div>
                <div class="anda-info">
                    <h2>Playtube User</h2>
                    <p>@playtubeuser • Lihat channel ></p>
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                        <button style="background: var(--hover-bg); border: none; color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500;">Ganti akun</button>
                        <button style="background: var(--hover-bg); border: none; color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500;">Akun Google</button>
                    </div>
                </div>
            </div>

            <div class="anda-section">
                <div class="anda-section-header">
                    <span>Riwayat</span>
                    <button style="background: none; border: 1px solid var(--border-color); color: white; padding: 4px 12px; border-radius: 16px; font-size: 12px;">Lihat semua</button>
                </div>
                <div class="anda-history-list">
                    ${watchHistory.length > 0 ? watchHistory.map(v => {
                        const videoId = typeof v.id === 'string' ? v.id : v.id.videoId;
                        return `
                        <div class="anda-history-item" onclick="openVideo('${videoId}')">
                            <div class="anda-history-thumb">
                                <img src="${v.snippet.thumbnails.high.url}" alt="">
                            </div>
                            <div class="anda-history-title">${v.snippet.title}</div>
                        </div>
                        `;
                    }).join('') : '<p style="padding: 16px; color: var(--text-secondary);">Belum ada riwayat.</p>'}
                </div>
            </div>

            <div class="anda-section" style="border-bottom: none;">
                <div class="anda-menu-item">
                    <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M10 14.65v-5.3L15 12l-5 2.65ZM13 13V7l5.2 3-5.2 3ZM22 13h-4v9h-2v-9h-2V7h8v6ZM2 13h1V7H2v6Zm3 0h1V7H5v6Zm3 0h1V7H8v6Z"></path></svg>
                    <span>Video Anda</span>
                </div>
                <div class="anda-menu-item">
                    <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M17 18V5H7v13h10zm1-14c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1h12zM8 7h3v2H8V7zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"></path></svg>
                    <span>Download</span>
                </div>
                <div class="anda-menu-item">
                    <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M18 7c0-1.1-.9-2-2-2h-1V2h-2v3h-2V2h-2v3H8V2H6v3H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7zM7 9h2v2H7V9zm0 4h2v2H7v-2zm10 4H7v-2h10v2zm0-4h-6v-2h6v2zm0-4h-6V9h6v2z"></path></svg>
                    <span>Film Anda</span>
                </div>
                <div class="anda-menu-item">
                    <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8-1.41-1.42z"></path></svg>
                    <span>Dapatkan Premium</span>
                </div>
            </div>
        `;
    }

    function setActiveSidebar(text, categoryId, query) {
        const items = document.querySelectorAll('.sidebar-item');
        items.forEach(item => {
            item.classList.remove('active');
            if (text && item.innerText.includes(text)) {
                item.classList.add('active');
            }
        });

        // Update bottom nav
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.classList.remove('active');
            if (text && item.innerText.includes(text)) {
                item.classList.add('active');
            }
        });
    }

    searchBtn.onclick = () => {
        const q = searchInput.value;
        if (q) loadSearch(q);
    };

    searchInput.onkeypress = (e) => {
        if (e.key === 'Enter') {
            const q = searchInput.value;
            if (q) loadSearch(q);
        }
    };

    // Create Sheet Logic
    const createBtn = document.getElementById('create-btn-mobile');
    const createSheet = document.getElementById('create-sheet');
    const sheetOverlay = document.getElementById('sheet-overlay');
    const closeSheet = document.getElementById('close-sheet');

    createBtn.onclick = () => {
        createSheet.style.display = 'flex';
        sheetOverlay.style.display = 'block';
    };

    const hideSheet = () => {
        createSheet.style.display = 'none';
        sheetOverlay.style.display = 'none';
    };

    closeSheet.onclick = hideSheet;
    sheetOverlay.onclick = hideSheet;

    // Notification Logic
    const notifBtn = document.getElementById('notif-btn');
    const notifOverlay = document.getElementById('notification-overlay');
    const closeNotif = document.getElementById('close-notif');
    const notifList = document.getElementById('notif-list');

    notifBtn.onclick = () => {
        renderNotifications();
        notifOverlay.style.display = 'flex';
    };

    closeNotif.onclick = () => {
        notifOverlay.style.display = 'none';
    };

    function renderNotifications() {
        const mockNotifs = [
            { user: 'Budi Gaming', action: 'mengupload: Review HP Terbaru 2024!', time: '2 jam yang lalu', img: 'https://picsum.photos/seed/n1/60/34' },
            { user: 'Susi Masak', action: 'mengupload: Resep Rendang Enak', time: '5 jam yang lalu', img: 'https://picsum.photos/seed/n2/60/34' },
            { user: 'Playtube', action: 'Selamat datang di Playtube!', time: '1 hari yang lalu', img: 'https://picsum.photos/seed/n3/60/34' },
            { user: 'Tekno Indo', action: 'Sedang LIVE: Apple Event', time: '2 hari yang lalu', img: 'https://picsum.photos/seed/n4/60/34' },
            { user: 'Music Channel', action: 'Video baru: Lagu Hits 2024', time: '3 hari yang lalu', img: 'https://picsum.photos/seed/n5/60/34' }
        ];

        notifList.innerHTML = mockNotifs.map(n => `
            <div class="notif-item">
                <div class="notif-avatar" style="background-image: url('https://ui-avatars.com/api/?name=${n.user}&background=random'); background-size: cover;"></div>
                <div class="notif-content">
                    <div class="notif-text"><b>${n.user}</b> ${n.action}</div>
                    <div class="notif-time">${n.time}</div>
                </div>
                <div class="notif-thumb">
                    <img src="${n.img}" alt="">
                </div>
                <div style="padding-left: 8px;">
                    <svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>
                </div>
            </div>
        `).join('');
    }

    // Modal & Login Logic
    const loginModal = document.getElementById('login-modal');
    const closeLogin = document.getElementById('close-login');
    const headerLoginBtn = document.getElementById('header-login-btn');
    const mobileAndaBtn = document.getElementById('mobile-anda-btn');
    const loginForm = document.getElementById('login-form');
    const mobileSearchBtn = document.getElementById('mobile-search-btn');

    const mobileSearchBack = document.getElementById('mobile-search-back');

    mobileSearchBtn.onclick = () => {
        document.body.classList.add('mobile-search-active');
        searchInput.focus();
    };

    mobileSearchBack.onclick = () => {
        document.body.classList.remove('mobile-search-active');
    };

    function checkLogin() {
        if (!localStorage.getItem('playtube_logged_in')) {
            loginModal.style.display = 'flex';
            closeLogin.style.display = 'none'; // Force login
        } else {
            loginModal.style.display = 'none';
        }
    }

    headerLoginBtn.onclick = () => loginModal.style.display = 'flex';
    // Removed duplicate onclick for mobileAndaBtn as it's now handled in the HTML
    closeLogin.onclick = () => loginModal.style.display = 'none';

    loginForm.onsubmit = (e) => {
        e.preventDefault();
        localStorage.setItem('playtube_logged_in', 'true');
        alert('Login berhasil! (Simulasi)');
        loginModal.style.display = 'none';
        loadTrending();
    };

    // Sidebar navigation interactivity
    document.querySelectorAll('.sidebar-item').forEach(item => {
        item.addEventListener('click', () => {
            document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
        });
    });

    // Initial load
    checkLogin();
    if (localStorage.getItem('playtube_logged_in')) {
        loadTrending();
    }
</script>

</body>
</html>
